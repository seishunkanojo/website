# 青春彼女 ウェブサイト仕様書

## プロジェクト概要

「青春彼女」は、レンタル彼女サービスを提供するウェブサイトです。ユーザーはキャストを閲覧し、デートの予約ができます。また、キャスト募集も行っています。

## 技術スタック

-   **フレームワーク**: Astro
-   **スタイリング**: Tailwind CSS
-   **画像最適化**: Astro の画像最適化機能
-   **CMS**: Newt（コンテンツ管理システム）
-   **スライダー**: Swiper

## ディレクトリ構造

```
src/
├── assets/        # 画像などの静的アセット
├── components/    # 再利用可能なコンポーネント
│   ├── blocks/    # 大きなブロックコンポーネント
│   ├── elements/  # 小さな要素コンポーネント
│   └── sections/  # セクションコンポーネント
├── layouts/       # ページレイアウト
├── lib/           # ユーティリティ関数
└── pages/         # ページコンポーネント
    ├── cast/      # キャスト関連ページ
    ├── contact/   # お問い合わせページ
    └── news/      # ニュース関連ページ
```

## 主要ファイルの役割

### 設定ファイル

#### `astro.config.mjs`

-   Astro の設定ファイル
-   Tailwind CSS の統合設定
-   画像最適化の設定（Sharp 使用）
    -   WebP、AVIF、PNG、JPEG フォーマットをサポート
    -   画質 80%に設定
    -   レスポンシブ画像の密度設定

### レイアウト

#### `src/layouts/Layout.astro`

-   サイト全体の共通レイアウト
-   ヘッダーとフッターを含む
-   メタタグ、タイトル、説明の設定
-   Google Fonts の読み込み
-   Font Awesome の読み込み
-   Swiper の読み込み

### ページコンポーネント

#### `src/pages/index.astro`

-   トップページ
-   HeroSection、AboutSection、CastSection、NewsSection、FAQSection を表示

#### `src/pages/cast/index.astro`

-   キャスト一覧ページ
-   全てのキャストを表示

#### `src/pages/cast/[slug].astro`

-   キャスト詳細ページ
-   キャストのプロフィール、写真、質問コーナー、動画を表示
-   タブ切り替え機能あり

#### `src/pages/news/index.astro`

-   ニュース一覧ページ
-   全てのニュース記事を表示

#### `src/pages/news/[slug].astro`

-   ニュース詳細ページ
-   記事のタイトル、日付、本文、サムネイル画像を表示

#### `src/pages/careers.astro`

-   求人募集ページ
-   仕事内容、給与、応募方法などの情報を表示

#### `src/pages/usage_guide.astro`

-   利用方法ページ
-   サービスの利用方法を説明

#### `src/pages/terms.astro`

-   利用規約ページ
-   Newt から HTML コンテンツを取得して表示

#### `src/pages/legal_notice.astro`

-   特定商取引法に基づく表記ページ
-   Newt から HTML コンテンツを取得して表示

### コンポーネント

#### ブロックコンポーネント (`src/components/blocks/`)

##### `Header.astro`

-   サイトのヘッダー
-   ロゴとナビゲーションメニューを表示
-   レスポンシブデザイン対応

##### `Footer.astro`

-   サイトのフッター
-   サイトマップ、SNS リンク、著作権表示を含む

##### `Carousel.astro`

-   画像カルーセル（スライダー）
-   Swiper ライブラリを使用
-   画像の遅延読み込み対応
-   メイン画像の更新機能あり

##### `CastCard.astro`

-   キャスト一覧で使用するカードコンポーネント
-   キャストの写真、名前、料金などを表示

##### `NewsCard.astro`

-   ニュース一覧で使用するカードコンポーネント
-   記事のサムネイル、タイトル、日付を表示
-   画像の遅延読み込み対応

#### セクションコンポーネント (`src/components/sections/`)

##### `HeroSection.astro`

-   トップページのヒーローセクション
-   画像スライドショー
-   最適化された画像を使用（WebP 形式、品質 70%）
-   自動スライド切り替え機能

##### `AboutSection.astro`

-   サービス概要セクション
-   背景画像と説明文を表示
-   最適化された画像を使用

##### `CastSection.astro`

-   キャスト紹介セクション
-   人気のキャストを表示

##### `NewsSection.astro`

-   ニュースセクション
-   最新のニュース記事を表示

##### `FAQSection.astro`

-   よくある質問セクション
-   アコーディオン形式で質問と回答を表示

#### 要素コンポーネント (`src/components/elements/`)

##### `Heading.astro`

-   見出しコンポーネント
-   英語と日本語の見出しを表示

##### `Button.astro`

-   汎用ボタンコンポーネント

##### `HeaderButton.astro`

-   ヘッダーで使用するボタンコンポーネント

##### `GirlButton.astro`

-   キャスト関連で使用するボタンコンポーネント

##### `ButtonWithCircle.astro`

-   円形装飾付きボタンコンポーネント

### ユーティリティ関数 (`src/lib/`)

##### `newt.js`

-   Newt CMS との接続設定
-   API キーと環境変数の設定

##### `fetchCasts.js`

-   キャスト情報を Newt から取得する関数

##### `fetchArticle.js`

-   ニュース記事を Newt から取得する関数

## 画像最適化

サイトのパフォーマンス向上のため、以下の画像最適化が実装されています：

1. **Astro の画像最適化設定**

    - Sharp 画像処理ライブラリを使用
    - WebP 形式を優先使用（ブラウザ互換性のために JPEG/PNG もサポート）
    - 画質 80%に設定してファイルサイズを削減
    - レスポンシブ画像の密度設定（1x, 2x）

2. **`Image`コンポーネントの使用**

    - `astro:assets`の`Image`コンポーネントを使用
    - 画像の幅と高さを明示的に指定
    - フォーマットと品質を指定（WebP 形式、品質 70-80%）

3. **画像の遅延読み込み**

    - `loading="lazy"`属性を使用して、ビューポート外の画像の読み込みを遅延
    - 重要な画像には`loading="eager"`を使用して優先的に読み込み

4. **レスポンシブ画像**
    - 異なるデバイスサイズに適した画像サイズを提供
    - `object-cover`などの CSS プロパティで画像の表示を最適化

## パフォーマンス最適化

1. **画像最適化**

    - 大きなサイズの画像（3MB 以上）を最適化して読み込み速度を向上
    - WebP 形式の使用でファイルサイズを削減

2. **遅延読み込み**

    - 画像の遅延読み込みでページの初期表示速度を向上
    - 必要なときに必要なリソースを読み込む

3. **レスポンシブデザイン**
    - モバイルからデスクトップまで様々なデバイスに対応
    - Tailwind CSS のブレークポイントを活用

## 今後の改善点

1. **さらなる画像最適化**

    - 画像のサイズと品質のバランスを調整
    - 画像のプリロード戦略の検討

2. **パフォーマンス監視**

    - Core Web Vitals の監視と改善
    - ユーザー体験の向上

3. **アクセシビリティの向上**
    - 画像の代替テキストの充実
    - キーボードナビゲーションの改善
